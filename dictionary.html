<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Từ điển</title>
</head>
<body>
    <input type="text" id="input-word" oninput="inputWord()" placeholder="Nhập từ cần dịch">
    <button onclick="inputWord()">Dịch</button>
    <p id="result"></p>
    <button onclick="insertTranslate()">Đóng góp bản dịch</button>
    <script>
        let eng = loadDict('eng');
        let vn = loadDict('vn');

        function translate(word) {
            for (let i = 0; i < eng.length; i++) {
                if(word.toLowerCase() == eng[i].toLowerCase()){
                    return ("Nghĩa của từ "+word+" là: "+vn[i]);
                }
                
            }
            return ("Từ này không có trong từ điển");
        }

        function inputWord() {
            let word = document.getElementById("input-word").value;
            if(word != ""){ 
                document.getElementById('result').innerHTML = translate(word);
            }
        }

        function loadDict(name) {
            if(localStorage.hasOwnProperty(name)){
                data = localStorage.getItem(name);
                return JSON.parse(data);
            }else{
                return [];
            }
        }

        function saveDict(name,dict) {
            data = JSON.stringify(dict);
            localStorage.setItem(name, dict);
        }

        function insertTranslate() {
            let word = document.getElementById("input-word").value;
            eng.push(word);

            let wordTrans = prompt("Nghĩa của từ này");
            vn.push(wordTrans);

            saveDict('eng', eng);
            saveDict('vn', vn);
        }

        
    </script>
</body>
</html>